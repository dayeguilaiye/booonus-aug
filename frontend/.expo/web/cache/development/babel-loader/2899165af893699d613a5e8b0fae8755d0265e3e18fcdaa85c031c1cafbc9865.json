{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Text, Card, Button, FAB, Chip, Dialog, Portal, TextInput, SegmentedButtons } from 'react-native-paper';\nimport { Ionicons } from '@expo/vector-icons';\nimport { rulesAPI } from \"../services/api\";\nimport { colors, commonStyles } from \"../styles/theme\";\nimport { useSnackbar } from \"../hooks/useSnackbar\";\nimport { showError, showSuccess } from \"../utils/notifications\";\nimport CustomSnackbar from \"../components/CustomSnackbar\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function RulesScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    rules = _useState2[0],\n    setRules = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    showCreateDialog = _useState6[0],\n    setShowCreateDialog = _useState6[1];\n  var _useState7 = useState({\n      name: '',\n      description: '',\n      points: '',\n      target_type: 'both'\n    }),\n    _useState8 = _slicedToArray(_useState7, 2),\n    newRule = _useState8[0],\n    setNewRule = _useState8[1];\n  useEffect(function () {\n    loadRules();\n  }, []);\n  var loadRules = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var response = yield rulesAPI.getRules();\n        setRules(response.rules || []);\n      } catch (error) {\n        console.error('加载规则失败:', error);\n        Alert.alert('错误', '加载规则失败');\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function loadRules() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var handleCreateRule = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (!newRule.name.trim() || !newRule.points) {\n        Alert.alert('错误', '请填写规则名称和积分');\n        return;\n      }\n      try {\n        yield rulesAPI.createRule(newRule.name.trim(), newRule.description.trim(), parseInt(newRule.points), newRule.target_type);\n        setShowCreateDialog(false);\n        setNewRule({\n          name: '',\n          description: '',\n          points: '',\n          target_type: 'both'\n        });\n        loadRules();\n        Alert.alert('成功', '规则创建成功！');\n      } catch (error) {\n        var _error$response, _error$response$data;\n        var errorMessage = ((_error$response = error.response) == null ? void 0 : (_error$response$data = _error$response.data) == null ? void 0 : _error$response$data.error) || '创建规则失败';\n        Alert.alert('创建失败', errorMessage);\n      }\n    });\n    return function handleCreateRule() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleExecuteRule = function () {\n    var _ref3 = _asyncToGenerator(function* (rule) {\n      var pointsText = rule.points > 0 ? `+${rule.points}` : `${rule.points}`;\n      Alert.alert('执行规则', `确定要执行规则 \"${rule.name}\" 吗？\\n积分变化：${pointsText}`, [{\n        text: '取消',\n        style: 'cancel'\n      }, {\n        text: '执行',\n        onPress: function () {\n          var _onPress = _asyncToGenerator(function* () {\n            try {\n              yield rulesAPI.executeRule(rule.id);\n              Alert.alert('成功', '规则执行成功！');\n            } catch (error) {\n              var _error$response2, _error$response2$data;\n              var errorMessage = ((_error$response2 = error.response) == null ? void 0 : (_error$response2$data = _error$response2.data) == null ? void 0 : _error$response2$data.error) || '执行规则失败';\n              Alert.alert('执行失败', errorMessage);\n            }\n          });\n          function onPress() {\n            return _onPress.apply(this, arguments);\n          }\n          return onPress;\n        }()\n      }]);\n    });\n    return function handleExecuteRule(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var getTargetTypeText = function getTargetTypeText(targetType) {\n    switch (targetType) {\n      case 'user1':\n        return '用户1';\n      case 'user2':\n        return '用户2';\n      case 'both':\n        return '双方';\n      default:\n        return targetType;\n    }\n  };\n  var getPointsColor = function getPointsColor(points) {\n    if (points > 0) return colors.success;\n    if (points < 0) return colors.error;\n    return colors.onSurfaceVariant;\n  };\n  if (loading) {\n    return _jsx(View, {\n      style: commonStyles.centerContainer,\n      children: _jsx(Text, {\n        children: \"\\u52A0\\u8F7D\\u4E2D...\"\n      })\n    });\n  }\n  return _jsxs(View, {\n    style: commonStyles.container,\n    children: [_jsxs(ScrollView, {\n      style: styles.scrollView,\n      children: [_jsx(Text, {\n        style: styles.title,\n        children: \"\\u89C4\\u5219\\u7BA1\\u7406\"\n      }), rules.length === 0 ? _jsx(Card, {\n        style: commonStyles.card,\n        children: _jsxs(Card.Content, {\n          style: styles.emptyContent,\n          children: [_jsx(Ionicons, {\n            name: \"list-outline\",\n            size: 48,\n            color: colors.onSurfaceVariant\n          }), _jsx(Text, {\n            style: styles.emptyText,\n            children: \"\\u8FD8\\u6CA1\\u6709\\u89C4\\u5219\"\n          }), _jsx(Text, {\n            style: styles.emptySubtext,\n            children: \"\\u521B\\u5EFA\\u4E00\\u4E9B\\u79EF\\u5206\\u89C4\\u5219\\u5427\\uFF01\"\n          })]\n        })\n      }) : rules.map(function (rule) {\n        return _jsx(Card, {\n          style: commonStyles.card,\n          children: _jsxs(Card.Content, {\n            children: [_jsxs(View, {\n              style: styles.ruleHeader,\n              children: [_jsx(Text, {\n                style: styles.ruleName,\n                children: rule.name\n              }), _jsxs(Chip, {\n                style: [styles.pointsChip, {\n                  backgroundColor: getPointsColor(rule.points) + '20'\n                }],\n                textStyle: {\n                  color: getPointsColor(rule.points)\n                },\n                children: [rule.points > 0 ? '+' : '', rule.points]\n              })]\n            }), rule.description && _jsx(Text, {\n              style: styles.ruleDescription,\n              children: rule.description\n            }), _jsxs(View, {\n              style: styles.ruleFooter,\n              children: [_jsx(Chip, {\n                icon: \"target\",\n                style: styles.targetChip,\n                compact: true,\n                children: getTargetTypeText(rule.target_type)\n              }), _jsx(Button, {\n                mode: \"contained\",\n                onPress: function onPress() {\n                  return handleExecuteRule(rule);\n                },\n                style: styles.executeButton,\n                compact: true,\n                children: \"\\u6267\\u884C\"\n              })]\n            })]\n          })\n        }, rule.id);\n      })]\n    }), _jsx(FAB, {\n      icon: \"plus\",\n      style: styles.fab,\n      onPress: function onPress() {\n        return setShowCreateDialog(true);\n      }\n    }), _jsx(Portal, {\n      children: _jsxs(Dialog, {\n        visible: showCreateDialog,\n        onDismiss: function onDismiss() {\n          return setShowCreateDialog(false);\n        },\n        children: [_jsx(Dialog.Title, {\n          children: \"\\u521B\\u5EFA\\u89C4\\u5219\"\n        }), _jsxs(Dialog.Content, {\n          children: [_jsx(TextInput, {\n            label: \"\\u89C4\\u5219\\u540D\\u79F0\",\n            value: newRule.name,\n            onChangeText: function onChangeText(text) {\n              return setNewRule(_objectSpread(_objectSpread({}, newRule), {}, {\n                name: text\n              }));\n            },\n            mode: \"outlined\",\n            style: styles.input\n          }), _jsx(TextInput, {\n            label: \"\\u89C4\\u5219\\u63CF\\u8FF0\",\n            value: newRule.description,\n            onChangeText: function onChangeText(text) {\n              return setNewRule(_objectSpread(_objectSpread({}, newRule), {}, {\n                description: text\n              }));\n            },\n            mode: \"outlined\",\n            style: styles.input,\n            multiline: true\n          }), _jsx(TextInput, {\n            label: \"\\u79EF\\u5206\\u53D8\\u5316\\uFF08\\u6B63\\u6570\\u4E3A\\u5956\\u52B1\\uFF0C\\u8D1F\\u6570\\u4E3A\\u60E9\\u7F5A\\uFF09\",\n            value: newRule.points,\n            onChangeText: function onChangeText(text) {\n              return setNewRule(_objectSpread(_objectSpread({}, newRule), {}, {\n                points: text\n              }));\n            },\n            mode: \"outlined\",\n            style: styles.input,\n            keyboardType: \"numeric\"\n          }), _jsx(Text, {\n            style: styles.segmentLabel,\n            children: \"\\u9002\\u7528\\u5BF9\\u8C61\"\n          }), _jsx(SegmentedButtons, {\n            value: newRule.target_type,\n            onValueChange: function onValueChange(value) {\n              return setNewRule(_objectSpread(_objectSpread({}, newRule), {}, {\n                target_type: value\n              }));\n            },\n            buttons: [{\n              value: 'user1',\n              label: '用户1'\n            }, {\n              value: 'user2',\n              label: '用户2'\n            }, {\n              value: 'both',\n              label: '双方'\n            }],\n            style: styles.segmentedButtons\n          })]\n        }), _jsxs(Dialog.Actions, {\n          children: [_jsx(Button, {\n            onPress: function onPress() {\n              return setShowCreateDialog(false);\n            },\n            children: \"\\u53D6\\u6D88\"\n          }), _jsx(Button, {\n            onPress: handleCreateRule,\n            children: \"\\u521B\\u5EFA\"\n          })]\n        })]\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  scrollView: {\n    flex: 1\n  },\n  title: _objectSpread(_objectSpread({}, commonStyles.title), {}, {\n    marginBottom: 16\n  }),\n  emptyContent: {\n    alignItems: 'center',\n    paddingVertical: 40\n  },\n  emptyText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: colors.onSurfaceVariant,\n    marginTop: 16\n  },\n  emptySubtext: {\n    fontSize: 14,\n    color: colors.onSurfaceVariant,\n    marginTop: 8\n  },\n  ruleHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8\n  },\n  ruleName: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: colors.onSurface,\n    flex: 1\n  },\n  pointsChip: {\n    marginLeft: 8\n  },\n  ruleDescription: {\n    fontSize: 14,\n    color: colors.onSurfaceVariant,\n    marginBottom: 12\n  },\n  ruleFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  targetChip: {\n    backgroundColor: colors.tertiaryContainer\n  },\n  executeButton: {\n    backgroundColor: colors.primary\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n    backgroundColor: colors.primary\n  },\n  input: {\n    marginVertical: 4\n  },\n  segmentLabel: {\n    fontSize: 16,\n    color: colors.onSurface,\n    marginTop: 8,\n    marginBottom: 8\n  },\n  segmentedButtons: {\n    marginBottom: 8\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","StyleSheet","ScrollView","Alert","Text","Card","Button","FAB","Chip","Dialog","Portal","TextInput","SegmentedButtons","Ionicons","rulesAPI","colors","commonStyles","useSnackbar","showError","showSuccess","CustomSnackbar","jsx","_jsx","jsxs","_jsxs","RulesScreen","_useState","_useState2","_slicedToArray","rules","setRules","_useState3","_useState4","loading","setLoading","_useState5","_useState6","showCreateDialog","setShowCreateDialog","_useState7","name","description","points","target_type","_useState8","newRule","setNewRule","loadRules","_ref","_asyncToGenerator","response","getRules","error","console","alert","apply","arguments","handleCreateRule","_ref2","trim","createRule","parseInt","_error$response","_error$response$data","errorMessage","data","handleExecuteRule","_ref3","rule","pointsText","text","style","onPress","_onPress","executeRule","id","_error$response2","_error$response2$data","_x","getTargetTypeText","targetType","getPointsColor","success","onSurfaceVariant","centerContainer","children","container","styles","scrollView","title","length","card","Content","emptyContent","size","color","emptyText","emptySubtext","map","ruleHeader","ruleName","pointsChip","backgroundColor","textStyle","ruleDescription","ruleFooter","icon","targetChip","compact","mode","executeButton","fab","visible","onDismiss","Title","label","value","onChangeText","_objectSpread","input","multiline","keyboardType","segmentLabel","onValueChange","buttons","segmentedButtons","Actions","create","flex","marginBottom","alignItems","paddingVertical","fontSize","fontWeight","marginTop","flexDirection","justifyContent","onSurface","marginLeft","tertiaryContainer","primary","position","margin","right","bottom","marginVertical"],"sources":["/Users/ziyuanhe/code/booonus-aug/frontend/src/screens/RulesScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  StyleSheet,\n  ScrollView,\n  Alert,\n} from 'react-native';\nimport {\n  Text,\n  Card,\n  Button,\n  FAB,\n  Chip,\n  Dialog,\n  Portal,\n  TextInput,\n  SegmentedButtons,\n} from 'react-native-paper';\nimport { Ionicons } from '@expo/vector-icons';\n\nimport { rulesAPI } from '../services/api';\nimport { colors, commonStyles } from '../styles/theme';\nimport { useSnackbar } from '../hooks/useSnackbar';\nimport { showError, showSuccess } from '../utils/notifications';\nimport CustomSnackbar from '../components/CustomSnackbar';\n\nexport default function RulesScreen() {\n  const [rules, setRules] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\n  const [newRule, setNewRule] = useState({\n    name: '',\n    description: '',\n    points: '',\n    target_type: 'both',\n  });\n\n  useEffect(() => {\n    loadRules();\n  }, []);\n\n  const loadRules = async () => {\n    try {\n      const response = await rulesAPI.getRules();\n      setRules(response.rules || []);\n    } catch (error) {\n      console.error('加载规则失败:', error);\n      Alert.alert('错误', '加载规则失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateRule = async () => {\n    if (!newRule.name.trim() || !newRule.points) {\n      Alert.alert('错误', '请填写规则名称和积分');\n      return;\n    }\n\n    try {\n      await rulesAPI.createRule(\n        newRule.name.trim(),\n        newRule.description.trim(),\n        parseInt(newRule.points),\n        newRule.target_type\n      );\n      setShowCreateDialog(false);\n      setNewRule({ name: '', description: '', points: '', target_type: 'both' });\n      loadRules();\n      Alert.alert('成功', '规则创建成功！');\n    } catch (error) {\n      const errorMessage = error.response?.data?.error || '创建规则失败';\n      Alert.alert('创建失败', errorMessage);\n    }\n  };\n\n  const handleExecuteRule = async (rule) => {\n    const pointsText = rule.points > 0 ? `+${rule.points}` : `${rule.points}`;\n    Alert.alert(\n      '执行规则',\n      `确定要执行规则 \"${rule.name}\" 吗？\\n积分变化：${pointsText}`,\n      [\n        { text: '取消', style: 'cancel' },\n        {\n          text: '执行',\n          onPress: async () => {\n            try {\n              await rulesAPI.executeRule(rule.id);\n              Alert.alert('成功', '规则执行成功！');\n            } catch (error) {\n              const errorMessage = error.response?.data?.error || '执行规则失败';\n              Alert.alert('执行失败', errorMessage);\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  const getTargetTypeText = (targetType) => {\n    switch (targetType) {\n      case 'user1': return '用户1';\n      case 'user2': return '用户2';\n      case 'both': return '双方';\n      default: return targetType;\n    }\n  };\n\n  const getPointsColor = (points) => {\n    if (points > 0) return colors.success;\n    if (points < 0) return colors.error;\n    return colors.onSurfaceVariant;\n  };\n\n  if (loading) {\n    return (\n      <View style={commonStyles.centerContainer}>\n        <Text>加载中...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={commonStyles.container}>\n      <ScrollView style={styles.scrollView}>\n        <Text style={styles.title}>规则管理</Text>\n        \n        {rules.length === 0 ? (\n          <Card style={commonStyles.card}>\n            <Card.Content style={styles.emptyContent}>\n              <Ionicons name=\"list-outline\" size={48} color={colors.onSurfaceVariant} />\n              <Text style={styles.emptyText}>还没有规则</Text>\n              <Text style={styles.emptySubtext}>创建一些积分规则吧！</Text>\n            </Card.Content>\n          </Card>\n        ) : (\n          rules.map((rule) => (\n            <Card key={rule.id} style={commonStyles.card}>\n              <Card.Content>\n                <View style={styles.ruleHeader}>\n                  <Text style={styles.ruleName}>{rule.name}</Text>\n                  <Chip\n                    style={[\n                      styles.pointsChip,\n                      { backgroundColor: getPointsColor(rule.points) + '20' },\n                    ]}\n                    textStyle={{ color: getPointsColor(rule.points) }}\n                  >\n                    {rule.points > 0 ? '+' : ''}{rule.points}\n                  </Chip>\n                </View>\n                \n                {rule.description && (\n                  <Text style={styles.ruleDescription}>{rule.description}</Text>\n                )}\n                \n                <View style={styles.ruleFooter}>\n                  <Chip\n                    icon=\"target\"\n                    style={styles.targetChip}\n                    compact\n                  >\n                    {getTargetTypeText(rule.target_type)}\n                  </Chip>\n                  <Button\n                    mode=\"contained\"\n                    onPress={() => handleExecuteRule(rule)}\n                    style={styles.executeButton}\n                    compact\n                  >\n                    执行\n                  </Button>\n                </View>\n              </Card.Content>\n            </Card>\n          ))\n        )}\n      </ScrollView>\n\n      <FAB\n        icon=\"plus\"\n        style={styles.fab}\n        onPress={() => setShowCreateDialog(true)}\n      />\n\n      <Portal>\n        <Dialog visible={showCreateDialog} onDismiss={() => setShowCreateDialog(false)}>\n          <Dialog.Title>创建规则</Dialog.Title>\n          <Dialog.Content>\n            <TextInput\n              label=\"规则名称\"\n              value={newRule.name}\n              onChangeText={(text) => setNewRule({ ...newRule, name: text })}\n              mode=\"outlined\"\n              style={styles.input}\n            />\n            <TextInput\n              label=\"规则描述\"\n              value={newRule.description}\n              onChangeText={(text) => setNewRule({ ...newRule, description: text })}\n              mode=\"outlined\"\n              style={styles.input}\n              multiline\n            />\n            <TextInput\n              label=\"积分变化（正数为奖励，负数为惩罚）\"\n              value={newRule.points}\n              onChangeText={(text) => setNewRule({ ...newRule, points: text })}\n              mode=\"outlined\"\n              style={styles.input}\n              keyboardType=\"numeric\"\n            />\n            <Text style={styles.segmentLabel}>适用对象</Text>\n            <SegmentedButtons\n              value={newRule.target_type}\n              onValueChange={(value) => setNewRule({ ...newRule, target_type: value })}\n              buttons={[\n                { value: 'user1', label: '用户1' },\n                { value: 'user2', label: '用户2' },\n                { value: 'both', label: '双方' },\n              ]}\n              style={styles.segmentedButtons}\n            />\n          </Dialog.Content>\n          <Dialog.Actions>\n            <Button onPress={() => setShowCreateDialog(false)}>取消</Button>\n            <Button onPress={handleCreateRule}>创建</Button>\n          </Dialog.Actions>\n        </Dialog>\n      </Portal>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  scrollView: {\n    flex: 1,\n  },\n  title: {\n    ...commonStyles.title,\n    marginBottom: 16,\n  },\n  emptyContent: {\n    alignItems: 'center',\n    paddingVertical: 40,\n  },\n  emptyText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: colors.onSurfaceVariant,\n    marginTop: 16,\n  },\n  emptySubtext: {\n    fontSize: 14,\n    color: colors.onSurfaceVariant,\n    marginTop: 8,\n  },\n  ruleHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  ruleName: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: colors.onSurface,\n    flex: 1,\n  },\n  pointsChip: {\n    marginLeft: 8,\n  },\n  ruleDescription: {\n    fontSize: 14,\n    color: colors.onSurfaceVariant,\n    marginBottom: 12,\n  },\n  ruleFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  targetChip: {\n    backgroundColor: colors.tertiaryContainer,\n  },\n  executeButton: {\n    backgroundColor: colors.primary,\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n    backgroundColor: colors.primary,\n  },\n  input: {\n    marginVertical: 4,\n  },\n  segmentLabel: {\n    fontSize: 16,\n    color: colors.onSurface,\n    marginTop: 8,\n    marginBottom: 8,\n  },\n  segmentedButtons: {\n    marginBottom: 8,\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}