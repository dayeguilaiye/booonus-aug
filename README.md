# Booonus - 情侣积分管理App

一个可爱的情侣积分管理应用，帮助情侣们通过积分系统管理日常互动和服务交换。

## 功能特性

- 🔐 **用户登录系统** - 简单的用户名密码登录，支持长期免登录
- 💕 **情侣关系管理** - 添加和解除情侣关系，一对一绑定
- 🪙 **积分系统** - 个人积分管理，用于购买对方服务
- 🏪 **个人小卖部** - 管理自己提供的服务商品
- 📋 **规则系统** - 自定义积分奖惩规则，支持撤销
- 📝 **事件记录** - 手动调整积分的事件系统
- 📊 **积分变化记录** - 完整的积分变化历史追踪

## 技术栈

### 前端
- **React Native** - 跨平台移动应用开发
- **马卡龙配色** - 可爱温馨的界面风格

### 后端
- **Go** - 高性能后端API服务
- **SQLite** - 轻量级数据库存储
- **日志系统** - 完整的操作日志记录

## 项目结构

```
booonus-aug/
├── backend/          # Go后端服务
│   ├── cmd/         # 应用入口
│   ├── internal/    # 内部包
│   ├── pkg/         # 公共包
│   ├── api/         # API路由和处理器
│   ├── models/      # 数据模型
│   ├── database/    # 数据库相关
│   └── logs/        # 日志文件
├── frontend/        # React Native前端
│   ├── src/         # 源代码
│   ├── components/  # 组件
│   ├── screens/     # 页面
│   ├── services/    # API服务
│   └── assets/      # 资源文件
└── docs/           # 文档
```

## 快速开始

### 🚀 一键启动

```bash
# 克隆项目
git clone <repository-url>
cd booonus-aug

# 启动完整应用（自动安装依赖并启动前后端）
./start.sh
```

### 📱 使用步骤

1. **启动应用**：运行 `./start.sh` 启动服务
2. **安装 Expo Go**：在手机上安装 Expo Go 应用
3. **扫描二维码**：用 Expo Go 扫描终端显示的二维码
4. **注册账号**：在应用中注册两个测试账号
5. **建立情侣关系**：使用其中一个账号邀请另一个账号
6. **开始使用**：创建商品、规则和事件，享受积分管理的乐趣！

### 🛠️ 分别启动服务

```bash
# 仅启动后端服务
./start.sh backend

# 仅启动前端服务
./start.sh frontend

# 运行API测试
./start.sh test

# 停止所有服务
./start.sh stop
```

### 📋 系统要求

- **Go** 1.21+ （后端）
- **Node.js** 16+ （前端）
- **npm** 或 **yarn**
- **Expo CLI**（会自动安装）

## 功能演示

### 🔐 用户系统
- 简单的用户名密码注册登录
- JWT token 长期免登录
- 用户资料管理

### 💕 情侣关系
- 通过用户名邀请情侣
- 一对一绑定关系
- 查看对方积分状态

### 🪙 积分系统
- 个人积分管理
- 完整的积分变化历史
- 支持撤销最近的操作

### 🏪 个人小卖部
- 创建和管理服务商品
- 设置价格和描述
- 情侣间购买服务

### 📋 规则系统
- 创建积分奖惩规则
- 支持针对个人或双方的规则
- 一键执行规则并记录

### 📝 事件系统
- 手动创建积分事件
- 为自己或对方调整积分
- 详细的事件记录

## 技术特性

### 🎨 界面设计
- **马卡龙配色**：温馨可爱的色彩搭配
- **Material Design 3**：现代化的设计语言
- **响应式布局**：适配不同屏幕尺寸
- **流畅动画**：提升用户体验

### 🔒 安全性
- **JWT认证**：安全的用户认证机制
- **密码加密**：使用bcrypt加密存储
- **权限控制**：严格的API访问控制
- **数据验证**：前后端双重数据验证

### 📊 数据管理
- **SQLite数据库**：轻量级本地存储
- **事务支持**：确保数据一致性
- **外键约束**：维护数据完整性
- **索引优化**：提升查询性能

## 开发指南

### 后端开发
```bash
cd backend
go mod tidy
go run cmd/main.go
```

### 前端开发
```bash
cd frontend
npm install
expo start
```

### 添加新功能
1. 后端：在 `models/` 定义数据模型，在 `api/handlers/` 添加处理器
2. 前端：在 `src/services/` 添加API调用，在 `src/screens/` 创建页面
3. 更新路由和导航配置

## 文档

- **API文档**：[docs/api.md](docs/api.md)
- **数据库设计**：[docs/database.md](docs/database.md)
- **部署指南**：[docs/deployment.md](docs/deployment.md)

## 故障排除

### 常见问题

**后端启动失败**：
```bash
# 检查Go版本
go version

# 检查端口占用
lsof -i :8080

# 查看错误日志
tail -f logs/backend.log
```

**前端连接失败**：
```bash
# 确认后端服务状态
curl http://localhost:8080/api/v1/health

# 检查网络配置
# 确保手机和电脑在同一网络
```

**依赖安装失败**：
```bash
# 清理缓存
go clean -modcache  # Go
npm cache clean --force  # npm

# 重新安装
./start.sh
```
